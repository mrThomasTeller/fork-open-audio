(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7357)}])},7357:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var l=r(5893),o=r(6522),n=r(1866),i=r(3717),a=r(7747),s=r(8783),c=r(2757),d=r(4e3),h=r(9078),u=r(8049),x=r(9371),p=r(6479),m=r(4292),g=r(3500),j=r(7169),b=r(1731),f=r(5763),w=r(5821),v=r(4225),y=r(1136),k=r(7294),S=r(3162);function splitText(e,t){let r=e.split(". "),l=[],o="";for(let e=0;e<r.length;e++){let n=r[e];o.length+n.length+1<=t?o+=(o.length?". ":"")+n:o.length?(l.push(o.trim()+"."),o=n):(l.push(n.trim()+"."),o="")}return o.length&&l.push(o.trim()),l}var C=r(3907);function Home(){let[e,t]=(0,C.Z)("open-audio-openai-api-key",""),[r,A]=(0,k.useState)("tts-1"),[T,E]=(0,k.useState)(""),[_,I]=(0,k.useState)("alloy"),[N,R]=(0,k.useState)(1),[F,O]=(0,k.useState)(!1),[z,P]=(0,k.useState)(1),[H,U]=(0,k.useState)(!1),W=(0,k.useRef)(null),[D,L]=(0,k.useState)([]),[q,M]=(0,k.useState)("speech");(0,k.useEffect)(()=>()=>{D.forEach(e=>{URL.revokeObjectURL(e)})},[D]);let V=(0,o.p)(),handleDownload=(e,t)=>{(0,S.saveAs)(e,"".concat(q,"-").concat(t,".mp3"))},handleSubmit=async t=>{t.preventDefault(),O(!0),L([]);let l=splitText(T,4096);try{for(let[t,o]of l.entries()){let l=new Headers;l.append("Authorization","Bearer ".concat(e)),l.append("Content-Type","application/json");let n=JSON.stringify({model:r,input:o,voice:_,speed:N.toFixed(1)}),i=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:l,body:n});if(console.log(i),!i.ok)throw Error("HTTP error! status: ".concat(i.status));let a=await i.blob(),s=URL.createObjectURL(a);handleDownload(s,t),L(e=>[...e,s])}}catch(e){console.error("Error:",e),V({title:"An error occurred",description:e.message,status:"error",duration:5e3,isClosable:!0})}finally{O(!1)}};return(0,l.jsx)(n.W,{bg:"gray.100",maxW:"container",children:(0,l.jsx)(n.W,{centerContent:!0,p:4,maxW:"container.md",children:(0,l.jsx)(i.k,{direction:"column",align:"center",justify:"center",minH:"100vh",w:"full",children:(0,l.jsx)(a.xu,{bg:"white",borderRadius:"lg",boxShadow:"lg",p:6,w:"full",maxW:"md",children:(0,l.jsxs)(s.g,{spacing:6,as:"form",onSubmit:handleSubmit,width:"full",maxW:"md",children:[(0,l.jsxs)(a.xu,{bg:"black",w:"100%",p:5,borderTopRadius:"md",boxShadow:"lg",children:[(0,l.jsx)(c.X,{textAlign:"center",color:"white",children:"Open-Audio TTS"}),(0,l.jsxs)(d.x,{fontSize:"xs",color:"gray.100",textAlign:"center",mt:2,children:["Powered by OpenAI TTS"," "]}),(0,l.jsx)(d.x,{fontSize:"xs",color:"gray.100",textAlign:"center",mt:2,fontWeight:"700",children:(0,l.jsx)("a",{href:"https://github.com/mrThomasTeller/fork-open-audio",target:"_blank",rel:"noopener noreferrer",style:{color:"gray.100"},children:"View on GitHub"})})]}),(0,l.jsxs)(h.r,{templateColumns:{md:"4fr 1fr"},gap:4,width:"full",children:[(0,l.jsxs)(u.NI,{isRequired:!0,children:[(0,l.jsx)(x.l,{htmlFor:"api-key",children:"API Key"}),(0,l.jsx)(p.I,{id:"api-key",placeholder:"Enter your OpenAI API key",type:"password",value:e,onChange:e=>t(e.target.value),variant:"outline",borderColor:"black"})]}),(0,l.jsx)(u.NI,{children:(0,l.jsxs)(s.g,{align:"start",spacing:0,children:[(0,l.jsx)(x.l,{htmlFor:"model",children:"Quality"}),(0,l.jsxs)(m.U,{align:"center",h:"100%",mx:"0",mt:"2",children:[(0,l.jsx)(g.r,{id:"model",colorScheme:"blackAlpha",isChecked:"tts-1-hd"===r,onChange:()=>{A("tts-1"===r?"tts-1-hd":"tts-1")},size:"md"}),(0,l.jsx)(u.Q6,{textAlign:"center",mt:"-1",children:"tts-1"===r?"High":"HD"})]})]})})]}),(0,l.jsxs)(u.NI,{isRequired:!0,children:[(0,l.jsx)(x.l,{htmlFor:"input-text",children:"Input Text"}),(0,l.jsx)(j.g,{id:"input-text",placeholder:"Enter the text you want to convert to speech",value:T,onChange:e=>{E(e.target.value)},resize:"vertical",borderColor:"black"}),(0,l.jsx)(a.xu,{textAlign:"right",fontSize:"sm",children:T.length})]}),(0,l.jsxs)(u.NI,{isRequired:!0,children:[(0,l.jsx)(x.l,{htmlFor:"input-text",children:"Filename"}),(0,l.jsx)(p.I,{id:"filename",placeholder:"Enter the text you want to convert to speech",value:q,onChange:e=>{M(e.target.value)},borderColor:"black",variant:"outline"})]}),(0,l.jsxs)(m.U,{width:"full",justifyContent:"space-between",children:[(0,l.jsxs)(u.NI,{isRequired:!0,width:"45%",children:[(0,l.jsx)(x.l,{htmlFor:"voice",children:"Voice"}),(0,l.jsxs)(b.P,{id:"voice",value:_,onChange:e=>I(e.target.value),variant:"outline",placeholder:"Select voice",borderColor:"black",focusBorderColor:"black",colorScheme:"blackAlpha",_hover:{borderColor:"gray.400"},children:[(0,l.jsx)("option",{value:"alloy",children:"Alloy"}),(0,l.jsx)("option",{value:"echo",children:"Echo"}),(0,l.jsx)("option",{value:"fable",children:"Fable"}),(0,l.jsx)("option",{value:"onyx",children:"Onyx"}),(0,l.jsx)("option",{value:"nova",children:"Nova"}),(0,l.jsx)("option",{value:"shimmer",children:"Shimmer"})]})]}),(0,l.jsxs)(u.NI,{width:"40%",mt:"-15",children:[(0,l.jsx)(x.l,{htmlFor:"speed",children:"Speed "}),(0,l.jsxs)(f.iR,{id:"speed",defaultValue:1,min:.25,max:4,step:.25,onChange:e=>P(e),onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),ref:W,"aria-label":"slider-ex-1",children:[(0,l.jsx)(f.Uj,{bg:"gray",children:(0,l.jsx)(f.Ms,{bg:"black"})}),(0,l.jsx)(w.u,{hasArrow:!0,bg:"black",color:"white",placement:"bottom",isOpen:H,label:"".concat(z.toFixed(2),"x"),children:(0,l.jsx)(f.gs,{})})]})]})]}),(0,l.jsx)(v.z,{size:"lg",bg:"black",color:"white",colorScheme:"black",borderColor:"black",type:"submit",isLoading:F,loadingText:"Generating...",children:"Create Speech"}),F&&(0,l.jsx)(y.$,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"black",size:"md"}),D.map((e,t)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("audio",{controls:!0,src:e,children:"Your browser does not support the audio element."},t),(0,l.jsx)(v.z,{onClick:()=>handleDownload(e,t),children:"Download MP3"})]}))]})})})})})}}},function(e){e.O(0,[541,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);